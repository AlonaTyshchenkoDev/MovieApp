<div class="list container">
    <div class="list-slider" *ngIf="!isWatchlist && (posters$ | async) as posterList">
      <p-carousel [value]="posterList.posters" [numVisible]="1" [numScroll]="1" [autoplayInterval]="7000"
                  [circular]="true">
        <ng-template let-poster pTemplate="item">
          <app-movie-item [movieData]="poster" [isPoster]="true" [pageType]="pageType"></app-movie-item>
        </ng-template>
      </p-carousel>
    </div>

    <div class="playlist-movies"
         *ngIf="pageType === EListType.Movies && (moviePlaylist$ | async) as movieWatchlist">

      <p-dataView #dv [value]="movieWatchlist.list" [paginator]="true" [rows]="9"
                  filterBy="title" [sortField]="sortField" [sortOrder]="sortOrder">
        <ng-template pTemplate="header">
          <div>
            <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
          </div>
        </ng-template>

        <ng-template let-movie pTemplate="listItem">
          <div class="col-12">
            <div class="movie-list-item">
              <img src="https://image.tmdb.org/t/p/original/{{movie.poster_path}}"/>
              <div class="movie-list-detail">
                <div class="movie-name">{{movie.title}}</div>
                <div class="movie-date">{{movie.release_date | date: 'dd/MM/yyyy'}}</div>
                <div class="movie-description">{{movie.overview}}</div>
                <p-rating [ngModel]="movie.vote_average" [readonly]="true"
                          [stars]="10" [cancel]="false"></p-rating>
                <div class="movie-list-action">
                  <p-toggleButton onIcon="pi pi-heart-fill" offIcon="pi pi-heart" [style]="{'width': '2em'}"
                                  (onChange)="markUnMarkAsFavorite($event, EMediaType.Movie, movie.id)">
                  </p-toggleButton>
                  <div class="movie-watchlist-action" *ngIf="isWatchlist">
                    <button pButton pRipple type="button" label="Delete" class="p-button-outlined p-button-rounded p-button-danger"
                            (click)="removeFromWatchlist(EMediaType.Movie, movie.id)">
                    </button>
                  </div>
                  <div class="movie-mainList-action" *ngIf="!isWatchlist">
                    <p-toggleButton onIcon="pi pi-minus" offIcon="pi pi-plus"
                                    onLabel="Watchlist" offLabel="Watchlist"
                                    (onChange)="addOrRemoveToWatchlist($event, EMediaType.Movie, movie.id)">
                    </p-toggleButton>
                    <button pButton pRipple type="button" label="Watch Now" class="p-button-raised p-button-primary"
                            (click)="watchItem()"></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>

        <ng-template let-movie pTemplate="gridItem">
          <div class="col-12 md:col-4">
            <div class="movie-grid-item card">
              <div class="movie-grid-item-content">
                <img src="https://image.tmdb.org/t/p/original/{{movie.poster_path}}"/>
                <div class="movie-name">{{movie.title}}</div>
                <div class="movie-date">{{movie.release_date | date: 'dd/MM/yyyy'}}</div>
                <div class="movie-description">{{movie.overview.slice(0, 150) + '...'}}</div>
                <p-rating [ngModel]="movie.vote_average"
                          [stars]="10" [readonly]="true" [cancel]="false"></p-rating>
                <div class="movie-list-action">
                  <p-toggleButton onIcon="pi pi-heart-fill" offIcon="pi pi-heart" [style]="{'width': '2em'}"
                                  (onChange)="markUnMarkAsFavorite($event, EMediaType.Movie, movie.id)">
                  </p-toggleButton>
                  <div class="movie-list-action" *ngIf="isWatchlist">
                    <button pButton pRipple type="button" label="Delete" class="p-button-outlined p-button-rounded p-button-danger"
                            (click)="removeFromWatchlist(EMediaType.Movie, movie.id)">
                    </button>
                  </div>
                  <div class="movie-list-action" *ngIf="!isWatchlist">
                    <p-toggleButton onIcon="pi pi-minus" offIcon="pi pi-plus"
                                    onLabel="Watchlist" offLabel="Watchlist"
                                    (onChange)="addOrRemoveToWatchlist($event, EMediaType.Movie, movie.id)">
                    </p-toggleButton>
                    <button pButton pRipple type="button" label="Watch Now" class="p-button-raised p-button-primary"
                            (click)="watchItem()"></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </p-dataView>
    </div>

    <div class="playlist-serials"
         *ngIf="pageType === EListType.Serials && (serialsPlaylist$ | async) as serialsWatchlist">

      <p-dataView #dv [value]="serialsWatchlist.list" [paginator]="true" [rows]="9"
                  filterBy="title" [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">
        <ng-template pTemplate="header">
          <div>
            <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
          </div>
        </ng-template>

        <ng-template let-tv pTemplate="listItem">
          <div class="col-12">
            <div class="movie-list-item">
              <img src="https://image.tmdb.org/t/p/original/{{tv.poster_path}}"/>
              <div class="movie-list-detail">
                <div class="movie-name">{{tv.name}}</div>
                <div class="movie-description">{{tv.overview.slice(0, 150) + '...'}}</div>
                <p-rating [ngModel]="tv.vote_average" [readonly]="true"
                          [stars]="10" [cancel]="false"></p-rating>
                <div class="movie-list-action">
                  <p-toggleButton onIcon="pi pi-heart-fill" offIcon="pi pi-heart" [style]="{'width': '2em'}"
                                  (onChange)="markUnMarkAsFavorite($event, EMediaType.Tv, tv.id)">
                  </p-toggleButton>
                  <div class="movie-list-action" *ngIf="isWatchlist">
                    <button pButton pRipple type="button" label="Delete" class="p-button-outlined p-button-rounded p-button-danger"
                            (click)="removeFromWatchlist(EMediaType.Tv, tv.id)">
                    </button>
                  </div>
                  <div class="movie-list-action" *ngIf="!isWatchlist">
                    <p-toggleButton onIcon="pi pi-minus" offIcon="pi pi-plus"
                                    onLabel="Watchlist" offLabel="Watchlist"
                                    (onChange)="addOrRemoveToWatchlist($event, EMediaType.Tv, tv.id)">
                    </p-toggleButton>
                    <button pButton pRipple type="button" label="Watch Now" class="p-button-raised p-button-primary"
                            (click)="watchItem()"></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>

        <ng-template let-tv pTemplate="gridItem">
          <div class="col-12 md:col-4">
            <div class="movie-grid-item card">
              <div class="movie-grid-item-content">
                <img src="https://image.tmdb.org/t/p/original/{{tv.poster_path}}"/>
                <div class="movie-name">{{tv.name}}</div>
                <div class="movie-description">{{tv.overview.slice(0, 150) + '...'}}</div>
                <p-rating [ngModel]="tv.vote_average"
                          [stars]="10" [readonly]="true" [cancel]="false"></p-rating>
                <div class="movie-list-action">
                  <p-toggleButton onIcon="pi pi-heart-fill" offIcon="pi pi-heart" [style]="{'width': '2em'}"
                                  (onChange)="markUnMarkAsFavorite($event, EMediaType.Tv, tv.id)">
                  </p-toggleButton>
                  <div class="movie-list-action" *ngIf="isWatchlist">
                    <button pButton pRipple type="button" label="Delete" class="p-button-outlined p-button-rounded p-button-danger"
                            (click)="removeFromWatchlist(EMediaType.Tv, tv.id)">
                    </button>
                  </div>
                  <div class="movie-list-action" *ngIf="!isWatchlist">
                    <p-toggleButton onIcon="pi pi-minus" offIcon="pi pi-plus"
                                    onLabel="Watchlist" offLabel="Watchlist"
                                    (onChange)="addOrRemoveToWatchlist($event, EMediaType.Tv, tv.id)">
                    </p-toggleButton>
                    <button pButton pRipple type="button" label="Watch Now" class="p-button-raised p-button-primary"
                            (click)="watchItem()"></button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </p-dataView>
    </div>
</div>
